html
	head
		link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.96.1/css/materialize.min.css" type="text/css")
		style.
			body {
				height: 1020px;
				width: 1980px;
				overflow-x: hidden;
			}

			#filter {
				border-right: solid black thin;
				background-color: white;
				overflow: hidden;
			}

			#filter button {
				margin-left: auto; 
				margin-right: auto;
			}

			#results {
				margin-left: 10%;
				margin-top: 0%;
				padding: 0px;
			}

			.full {
				height: 100%;
				width: 100%;
				max-width: 100%;
				max-height: 100%;

			}
			.full-width {
				height: auto;
				width: 100%;
			}
			.full-height {
				height: 100%;
				width: auto;
			}
			.padding-sm {
				padding-left: 10%;
			}

			#results {
				overflow-y: scroll;
				width: 55%;
			}

			#results-wrapper {
				padding: 25px;
			}
	body
		.row
			#filter(class="col l2 full-height z-depth-2")
				.row(class="white")
					.input-field
						input(id="search" placeholder="Movie, Genre, Tag, Name" type="text")
				#filter-radio.row
					#typeRadio.padding-sm
						p
							input(id="radioMovie" name="groupType" type="radio" value="get_movie" checked)
							label(for="radioMovie") Movie
						p
							input(id="radioActor" name="groupType" type="radio" value="get_actor")
							label(for="radioActor") Actor
						p
							input(id="radioDirector" name="groupType" type="radio" value="get_director")
							label(for="radioDirector") Director
						p
							input(id="radioGenre" name="groupType" type="radio" value="get_genre")
							label(for="radioGenre") Genre
						p
							input(id="radioTag" name="groupType" type="radio" value="get_tag")
							label(for="radioTag") Tag
				.row
					button.btn(id="topMovies") Top 20 Movies
				.row
					button.btn(id="topActors") Top 20 Actors
				.row
					button.btn(id="topDirectors") Top 20 Directors

			#results(class="col l10 white full-height")
				#results-wrapper

	script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js")
	script(src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.96.1/js/materialize.min.js")
	script.
		$('#search').keydown(function(e){
			if(e.keyCode === 13)
			{
				var queryMethod = $('input[name="groupType"]:checked', '#filter-radio').val();

				$('#results').empty();
				$.get('/api/'+ queryMethod +'?name=' + $('#search').val().replace(/ /g,"+"), function(data){
					var toAppend = '';
					for(var i = 0; i < data.length; i++)
					{
						toAppend += '<div class="col l3">' +
										'<div class="card z-depth-2">' +
											'<div class="card-image">' +
												'<img src="'+ data[i].image_url_imdb +'" class="responsive-image activator">' +
											'</div>' +
											'<div class="card-content">' +
												'<div class="col l6" style="border-right: solid thin #DDDDDD;">' +
													'<h4 class="center-align flow-text">'+ data[i].rt_audience_score +'%</h4>' +
												'</div>' +
												'<div class="col l6">' +
													'<h4 class="center-align flow-text">0%</h4>' +
												'</div>' +
											'</div>' +
											'<div class="card-reveal">' +
												'<div class="row">' +
													'<span class="card-title grey-text text-darken-4">'+ data[i].title_english +'</span>' +
												'</div>' +
												'<div class="row">' +
													'<span>Year: '+ data[i].year +'</span>' +
												'</div>' +
												'<div class="row">' +
													'<span>RT Score: '+ data[i].rt_audience_score +'</span>' +
												'</div>' +
											'</div>' +
										'</div>' +
									'</div>';
					}
					$('#results').append(toAppend);
				});
			}
		});

		$('#topMovies').click(function(){
			$('#results').empty();
			$.get('/api/top_movies', function(data){
				var toAppend = '';
				for(var i = 0; i < data.length; i++)
				{
					toAppend += '<div class="col l3">' +
									'<div class="card z-depth-2">' +
										'<div class="card-image">' +
											'<img src="'+ data[i].image_url_imdb +'" class="responsive-image activator">' +
										'</div>' +
										'<div class="card-content">' +
											'<div class="col l6" style="border-right: solid thin #DDDDDD;">' +
												'<h4 class="center-align flow-text">'+ data[i].rt_audience_score +'%</h4>' +
											'</div>' +
											'<div class="col l6">' +
												'<h4 class="center-align flow-text">0%</h4>' +
											'</div>' +
										'</div>' +
										'<div class="card-reveal">' +
											'<div class="row">' +
												'<span class="card-title grey-text text-darken-4">'+ data[i].title_english +'</span>' +
											'</div>' +
											'<div class="row">' +
												'<span>Year: '+ data[i].year +'</span>' +
											'</div>' +
											'<div class="row">' +
												'<span>RT Score: '+ data[i].rt_audience_score +'</span>' +
											'</div>' +
										'</div>' +
									'</div>' +
								'</div>';
				}
				$('#results').append(toAppend);
			});
		});
